{% extends "cluster.jinja2" %}

{% block contentCluster %}

<div id="aum" class="container-fluid">
  <div class="row-fluid">
    <div class="span12">
      <h3 align="center">Node Detail: {{ node.hostname_status }} </h3>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span12">

      <meta http-equiv="refresh" content="60;URL= '{{ cluster_detail_url }}{{ node.id }}'">

      <p><b>Node ID :</b> {{ node.id }}</p>
      <p><b>Node :</b> {{ node.node }}</p>
      <p><b>Hostname :</b>
        {% if node.hostname == 0 %}
          <font color="green"> {{ node.hostname_status }} </font>
        {% elif node.hostname == 1 %}
          <font color="red">ERROR: {{ node.hostname_status }} </font>
        {% else %}
          <font color="orange">Installing... (wait)</font>
        {% endif %}
      </p>
      <p><b>Original username :</b> {{ node.username }}</p>
      <p><b>Node type :</b>
        {% if node.master == 0 %}
          Worker
        {% elif node.master == 1 %}
          Master
        {% endif %}
      </p>

      <hr>
      <h4 align="center">Services status</h4>

      <p><b>Ping :</b>
        {% if node.service_ping == 0 %}
          <font color="green">OK</font>
        {% elif node.service_ping == 1 %}
          <font color="red">ERROR</font>
        {% else %}
          <font color="orange">Installing... (wait)</font>
        {% endif %}
      </p>

      <p><b>SSH (connection made with the original user - tested only once):</b>
        {% if node.service_ssh == 0 %}
          <font color="green">OK</font>
        {% elif node.service_ssh == 1 %}
          <font color="red">ERROR: {{ node.service_ssh_status }} </font>
        {% else %}
          <font color="orange">Installing... (wait)</font>
        {% endif %}
      </p>

      <hr>
      <h4 align="center">Config / install status</h4>

      <p><b>User "minisecbgp" :</b>
        {% if node.conf_user == 0 %}
          <font color="green">OK: {{ node.conf_user_status }}</font>
        {% elif node.conf_user == 1 %}
          <font color="red">ERROR: {{ node.conf_user_status }}</font>
        {% else %}
          <font color="orange">Installing... (wait)</font>
        {% endif %}
      </p>

      <p><b>SSH config (minisecbgpuser connection) :</b>
        {% if node.conf_ssh == 0 %}
          <font color="green">OK: {{ node.conf_ssh_status }}</font>
        {% elif node.conf_ssh == 1 %}
          <font color="red">ERROR: {{ node.conf_ssh_status }}</font>
        {% else %}
          <font color="orange">Installing... (wait)</font>
        {% endif %}
      </p>

      <p><b>Install remote prerequisites :</b>
        {% if node.install_remote_prerequisites == 0 %}
          <font color="green">OK: {{ node.install_remote_prerequisites_status }}</font>
        {% elif node.install_remote_prerequisites == 1 %}
          <font color="red">ERROR: {{ node.install_remote_prerequisites_status }}</font>
        {% else %}
          <font color="orange">Installing... (wait)</font>
        {% endif %}
      </p>

      <p><b><a href="http://mininet.org/" target="_blank">Mininet :</a></b>
        {% if node.install_mininet == 0 %}
          <font color="green">OK: {{ node.install_mininet_status }}</font>
        {% elif node.install_mininet == 1 %}
          <font color="red">ERROR: {{ node.install_mininet_status }}</font>
        {% else %}
          <font color="orange">Installing... (wait)</font>
        {% endif %}
      </p>

      <p><b><a href="https://containernet.github.io/" target="_blank">Containernet :</a></b>
        {% if node.install_containernet == 0 %}
          <font color="green">OK: {{ node.install_containernet_status }}</font>
        {% elif node.install_containernet == 1 %}
          <font color="red">ERROR: {{ node.install_containernet_status }}</font>
        {% else %}
          <font color="orange">Installing... (wait)</font>
        {% endif %}
      </p>

      <p><b><a href="http://glaros.dtc.umn.edu/gkhome/metis/metis/overview" target="_blank">Metis :</a></b>
        {% if node.install_metis == 0 %}
          <font color="green">OK: {{ node.install_metis_status }}</font>
        {% elif node.install_metis == 1 %}
          <font color="red">ERROR: {{ node.install_metis_status }}</font>
        {% else %}
          <font color="orange">Installing... (wait)</font>
        {% endif %}
      </p>

      <p><b><a href="https://maxinet.github.io/" target="_blank">Maxinet :</a></b>
        {% if node.install_maxinet == 0 %}
          <font color="green">OK: {{ node.install_maxinet_status }}</font>
        {% elif node.install_maxinet == 1 %}
          <font color="red">ERROR: {{ node.install_maxinet_status }}</font>
        {% else %}
          <font color="orange">Installing... (wait)</font>
        {% endif %}
      </p>

    </div>

    <p align="center">* server status checked every minute</p>

  </div>
</div>

{% endblock contentCluster %}